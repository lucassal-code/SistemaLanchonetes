<?xml version="1.0" encoding="UTF-8"?>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/XHtml.xhtml to edit this template
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Cadastro de Funcionários</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <h:outputStylesheet name="css/cad_func.css" /> <!-- adicionando css -->
    </h:head>
    <h:body>
        <h1>Cadastro de Funcionários</h1>
        <h:outputLabel style="color: red; size: 18px;">#{cadastro.mensagem1}</h:outputLabel>
        <br/><br/>
        <h:form id = "FuncionariosCadastrados">
            
            <h:outputLabel>Nome:</h:outputLabel>
            <h:inputText value="#{cadastro.dadosFunc.nome}" /> <!-- não necessita de </h:inputText> para fechar pois não possui componentes filhos -->
            <br/>
            
            <h:outputLabel>CPF:</h:outputLabel>
            <h:inputText value="#{cadastro.dadosFunc.cpf}" />
            <br/>
            
            <h:outputLabel>Telefone:</h:outputLabel>
            <h:inputText value="#{cadastro.dadosFunc.telefone}" />
            <br/>
            
            <h:outputLabel>Endereço:</h:outputLabel>
            <h:inputText value="#{cadastro.dadosFunc.endereco}" />
            <br/>
            
            <h:outputLabel>Cargo:</h:outputLabel>
            <h:inputText value="#{cadastro.dadosFunc.cargo}" />
            <br/>
            
            <h:outputLabel>Salário:</h:outputLabel>
            <h:inputText value="#{cadastro.dadosFunc.salario}" />
            <br/>
            
            <h:outputLabel>E-mail:</h:outputLabel>
            <h:inputText value="#{cadastro.dadosFunc.email}" />
            <br/>
            
            <h:commandButton value="Gravar Funcionário" actionListener="#{cadastro.cadastrarFuncionario()}"/>
            <br/>
            
            <h2>Lista de Funcionários</h2>
            <div>Listagem:</div>
            <h:dataTable value="#{cadastro.listaFunc}" var="FAtual" id="listaFunc" >
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>NOME:</h:outputLabel></f:facet>
                    <h:outputLabel>#{FAtual.nome}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>CPF:</h:outputLabel></f:facet>
                    <h:outputLabel>#{FAtual.cpf}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>TELEFONE:</h:outputLabel></f:facet>
                    <h:outputLabel>#{FAtual.telefone}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>ENDEREÇO:</h:outputLabel></f:facet>
                    <h:outputLabel>#{FAtual.endereco}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>CARGO:</h:outputLabel></f:facet>
                    <h:outputLabel>#{FAtual.cargo}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>SALÁRIO:</h:outputLabel></f:facet>
                    <h:outputLabel>R$: #{FAtual.salario}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>EMAIL:</h:outputLabel></f:facet>
                    <h:outputLabel>#{FAtual.email}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <h:commandLink actionListener="#{cadastro.apagarDados(FAtual.id)}" style="border: none;">
                        <h:graphicImage library="images" name="deletarDados.png" width="5%" height="5%" onmouseover="this.style.cursor = 'pointer'" >
                            <!-- jânio conseguiu arrumar o código, o problema tava no java onde não retornava o int do id -->
                            <f:ajax execute="@this" render="listaFunc" event="click" />
                        </h:graphicImage>
                    </h:commandLink>
                </h:column>
                
                <h:column>
                    <h:commandLink actionListener="#{cadastro.alterarFunc(FAtual.id)}" style="border: none;">
                        <h:graphicImage library="images" name="atualizar.png" width="5%" height="5%" onmouseover="this.style.cursor = 'pointer'" >
                            <f:ajax execute="@this" render="listaFunc" event="click" />
                        </h:graphicImage>
                    </h:commandLink>
                </h:column>
                
            </h:dataTable>
        </h:form>
        
        <h:form id = "ClientesCadastrados">
            
            <h:outputLabel>Nome:</h:outputLabel>
            <h:inputText value="#{cadastro.dadoscli.nome}" /> <!-- não necessita de </h:inputText> para fechar pois não possui componentes filhos -->
            <br/>
            
            <h:outputLabel>E-mail:</h:outputLabel>
            <h:inputText value="#{cadastro.dadoscli.email}" />
            <br/>
            
            <h:outputLabel>Senha:</h:outputLabel>
            <h:inputText value="#{cadastro.dadoscli.senha}" />
            <br/>
            
            <h:outputLabel>Endereço:</h:outputLabel>
            <h:inputText value="#{cadastro.dadoscli.endereço}" />
            <br/>
            
            <h:commandButton value="Cadastrar-se" actionListener="#{cadastro.cadastrarCliente()}"/>
            <br/>
            
            <h2>Lista de Clientes</h2>
            <div>Listagem:</div>
            <h:dataTable value="#{cadastro.listaClientes}" var="CAtual" id="listaClientes" >
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>NOME:</h:outputLabel></f:facet>
                    <h:outputLabel>#{CAtual.nome}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>ENDEREÇO:</h:outputLabel></f:facet>
                    <h:outputLabel>#{CAtual.endereço}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>CARGO:</h:outputLabel></f:facet>
                    <h:outputLabel>#{CAtual.email}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <h:commandLink actionListener="#{cadastro.apagarDadosCliente(CAtual.id)}" style="border: none;">
                        <h:graphicImage library="images" name="deletarDados.png" width="5%" height="5%" onmouseover="this.style.cursor = 'pointer'" >
                            <f:ajax execute="@this" render="listaClientes" event="click" />
                        </h:graphicImage>
                    </h:commandLink>
                </h:column>
                
                <h:column>
                    <h:commandLink actionListener="#{cadastro.alterarCli(CAtual.id)}" style="border: none;">
                        <h:graphicImage library="images" name="atualizar.png" width="5%" height="5%" onmouseover="this.style.cursor = 'pointer'" >
                            <f:ajax execute="@this" render="listaClientes" event="click" />
                        </h:graphicImage>
                    </h:commandLink>
                </h:column>
                
            </h:dataTable>
            
            <h3>Organização de Pedido</h3>
            <h:outputLabel>N° Pedido:</h:outputLabel>
            <h:inputText value="#{pedidosController.dadosPed.numPedido}" />
            <br/>
            
            <h:outputLabel>Nome do Cliente:</h:outputLabel>
            <h:inputText value="#{pedidosController.dadosPed.nomeCliente}" />
            <br/>
            
            <h:outputLabel>Valor total:</h:outputLabel>
            <h:outputLabel value="#{pedidosController.dadosPed.valorTotal}">
                <f:convertNumber type="currency" currencySymbol="R$ " maxFractionDigits="2" minFractionDigits="2"/> 
                <!-- converte em valor monetário e não passa de duas casas decimais -->
            </h:outputLabel>
            <br/>
            
            <h:outputLabel>Infos Adicionais:</h:outputLabel>
            <h:inputText value="#{pedidosController.dadosPed.infoAdd}" />
            <br/>
            
            <h:commandButton value="Finalizar Pedido" actionListener="#{pedidosController.criarPedido()}"/>
            <div/>
            
            <h4>Listagem de Pedidos</h4>
            <h:dataTable value="#{pedidosController.listaPedidos}" var="PAtual" id="listaProdutos">
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>N° </h:outputLabel></f:facet>
                    <h:outputLabel>#{PAtual.numPedido}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>Nome do Cliente: </h:outputLabel></f:facet>
                    <h:outputLabel>#{PAtual.nomeCliente}</h:outputLabel>
                </h:column>
                    
                <h:column>
                    <f:facet name="header"><h:outputLabel>Valor: </h:outputLabel></f:facet>
                    <h:outputLabel value="#{PAtual.valorTotal}">
                         <f:convertNumber type="currency" currencySymbol="R$ " maxFractionDigits="2" minFractionDigits="2"/>
                    </h:outputLabel>
                </h:column>
                
                <h:column>
                    <f:facet name="header"><h:outputLabel>Informações: </h:outputLabel></f:facet>
                    <h:outputLabel>#{PAtual.infoAdd}</h:outputLabel>
                </h:column>
                
                <h:column>
                    <h:commandLink actionListener="#{pedidosController.apagarPedido(PAtual.numPedido)}" style="border: none;">
                        <h:graphicImage library="images" name="deletarDados.png" width="5%" height="5%" onmouseover="this.style.cursor = 'pointer'" >
                            <f:ajax execute="@this" render="listaProdutos" event="click" />
                        </h:graphicImage>
                    </h:commandLink>
                </h:column>
                
                <h:column>
                    <h:commandLink actionListener="#{pedidosController.alterarPed(PAtual.numPedido)}" style="border: none;">
                        <h:graphicImage library="images" name="atualizar.png" width="5%" height="5%" onmouseover="this.style.cursor = 'pointer'" >
                            <f:ajax execute="@this" render="listaProdutos" event="click" />
                        </h:graphicImage>
                    </h:commandLink>
                </h:column>
                
            </h:dataTable>
        </h:form>
    </h:body>
</html>
